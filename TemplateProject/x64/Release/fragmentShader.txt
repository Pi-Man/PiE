#version 330 core

in vec3 ObjectPos;
in vec3 Normal;
in vec2 uv;
in vec3 Color;

out vec4 col;

uniform sampler2D main_tex;

vec2 square(vec2 z) {
	vec2 z2;
	z2.x = z.x * z.x - z.y * z.y;
	z2.y = z.x * z.y * 2;
	return z2;
}

#define MAX_COUNT 1000.0

void main() {
	vec2 c = ObjectPos.xy;
	vec2 z = vec2(0, 0);
	float count = 0;
	while (dot(z, z) < 4 && count < MAX_COUNT) {
		z = square(z) + c;
		count++;
	}
    col = vec4(1.0 - count / MAX_COUNT);
}